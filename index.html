<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Jack Sanity : A scriptable environment for controlling jackdbus clients.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Jack Sanity</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/psychoticmeow/jack-sanity">View on GitHub</a>

          <h1 id="project_title">Jack Sanity</h1>
          <h2 id="project_tagline">A scriptable environment for controlling jackdbus clients.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/psychoticmeow/jack-sanity/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/psychoticmeow/jack-sanity/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<h3>
<a id="arch-linux" class="anchor" href="#arch-linux" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arch Linux</h3>

<p>Arch Linux users can install Jack Sanity <a href="https://aur.archlinux.org/packages/jack-sanity-git/">from the Arch User Repository</a>. For more information about using the AUR see the <a href="https://wiki.archlinux.org/index.php/Arch_User_Repository">Arch Linux Wiki</a>.</p>

<h3>
<a id="from-source" class="anchor" href="#from-source" aria-hidden="true"><span class="octicon octicon-link"></span></a>From source</h3>

<ol>
<li>Clone the repository using git, or <a href="https://github.com/psychoticmeow/jack-sanity/archive/master.zip">download the latest archive</a> and extract it somewhere convenient.</li>
<li>Inside the created folder run <code>npm install</code> to install all of the required libraries.</li>
<li>Then symlink <code>bin/jack-sanity</code> to somewhere in your path.</li>
</ol>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>To start a Jack Sanity session simply run:</p>

<div class="highlight highlight-bash"><pre>jack-sanity --config your-session.js</pre></div>

<p>When you make changes to the configuration file, jack-sanity will close the running session and start a new one with your configuration changes.</p>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p>Create a new JavaScript file and save it somewhere handy, this will be your session configuration file. You can use it to watch JACK clients and ports:</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> hardware <span class="pl-k">=</span> session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>system<span class="pl-pds">'</span></span>),
    effects <span class="pl-k">=</span> session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>my-effects<span class="pl-pds">'</span></span>);

effects.on(<span class="pl-s1"><span class="pl-pds">'</span>online<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-c">// Auto-connect a client to the hardware output:</span>
    effects.connect(hardware);
});</pre></div>

<p>You can also start and stop processes:</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> effectsHost <span class="pl-k">=</span> session.createProcess(<span class="pl-s1"><span class="pl-pds">'</span>calfjackhost<span class="pl-pds">'</span></span>, [
    <span class="pl-s1"><span class="pl-pds">'</span>--client<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>my-effects<span class="pl-pds">'</span></span>
]);

session.on(<span class="pl-s1"><span class="pl-pds">'</span>open<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-c">// Start the effects host when the session opens:</span>
    effectsHost.<span class="pl-s3">open</span>();
});

session.on(<span class="pl-s1"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-c">// Stop the effects host when the session closes:</span>
    effectsHost.<span class="pl-s3">close</span>();
});

effectsHost.on(<span class="pl-s1"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-c">// Restart the effects host when it closes (or crashes):</span>
    effectsHost.<span class="pl-s3">open</span>();
});</pre></div>

<p>To make life easier, you can combine the client and the process under one name:</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> effects <span class="pl-k">=</span> session.combine(
    session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>my-effects<span class="pl-pds">'</span></span>),
    session.createProcess(<span class="pl-s1"><span class="pl-pds">'</span>calfjackhost<span class="pl-pds">'</span></span>, [
        <span class="pl-s1"><span class="pl-pds">'</span>--client<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>my-effects<span class="pl-pds">'</span></span>
    ])
);

session.on(<span class="pl-s1"><span class="pl-pds">'</span>open<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-c">// Start the effects host when the session opens:</span>
    effects.<span class="pl-s3">open</span>();

    <span class="pl-c">// Connect the effects:</span>
    <span class="pl-k">if</span> (effects.canConnect(hardware)) {
        effects.connect(hardware);
    }
});</pre></div>

<p>You can also log events to the terminal:</p>

<div class="highlight highlight-js"><pre>session.on(<span class="pl-s1"><span class="pl-pds">'</span>open<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Session is ready...<span class="pl-pds">'</span></span>);
});

session.on(<span class="pl-s1"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Session closed.<span class="pl-pds">'</span></span>);
});</pre></div>

<h2>
<a id="public-api" class="anchor" href="#public-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Public API</h2>

<p>The API available within configuration scripts.</p>

<h3>
<a id="session-global-object" class="anchor" href="#session-global-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>session global object</h3>

<h4>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h4>

<h5>
<a id="createclientclientname-portname" class="anchor" href="#createclientclientname-portname" aria-hidden="true"><span class="octicon octicon-link"></span></a>createClient(clientName, [portName])</h5>

<p>Create an interface to a matching set of jack clients, even if they do not currently exist in the session. See <code>Client.isOnline</code>.</p>

<ul>
<li>
<code>clientName</code> a <code>String</code> or <code>RegExp</code> to search with.</li>
<li>Optionally <code>portName</code> a <code>String</code> or <code>RegExp</code> to search with.</li>
<li>Returns an instance of <code>Client</code>.</li>
</ul>

<div class="highlight highlight-js"><pre><span class="pl-c">// Specify an exact client name:</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>);

<span class="pl-c">// Specify an exact port name:</span>
session.createPort(<span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>event-out<span class="pl-pds">'</span></span>);

<span class="pl-c">// Use regular expressions to match a client name:</span>
session.createClient(<span class="pl-sr"><span class="pl-pds">/</span>my-client<span class="pl-pds">/</span>i</span>);

<span class="pl-c">// Use regular expressions to match a port name:</span>
session.createPort(<span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>,<span class="pl-sr"> <span class="pl-pds">/</span>left<span class="pl-k">|</span>right<span class="pl-pds">/</span>i</span>);</pre></div>

<h5>
<a id="createprocesscommand-args" class="anchor" href="#createprocesscommand-args" aria-hidden="true"><span class="octicon octicon-link"></span></a>createProcess(command, args)</h5>

<p>Create a process definition that can be started and stopped as needed.</p>

<ul>
<li>
<code>command</code> a <code>String</code> of the name of the command to execute.</li>
<li>
<code>args</code> an array of arguments to be passed to the function.</li>
<li>Returns an instance of <code>Process</code>.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createProcess(<span class="pl-s1"><span class="pl-pds">'</span>calfjackhost<span class="pl-pds">'</span></span>, [
    <span class="pl-s1"><span class="pl-pds">'</span>--client<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>
]);</pre></div>

<h5>
<a id="combine" class="anchor" href="#combine" aria-hidden="true"><span class="octicon octicon-link"></span></a>combine(...)</h5>

<p>Combine the functions and events of two or more <code>Client</code> and <code>Process</code> instances into one object.</p>

<ul>
<li>One or more <code>Client</code> or <code>Process</code> to combine to.</li>
<li>Returns a new object.</li>
</ul>

<div class="highlight highlight-js"><pre>session.combine(
    session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>),
    session.createProcess(<span class="pl-s1"><span class="pl-pds">'</span>calfjackhost<span class="pl-pds">'</span></span>, [
        <span class="pl-s1"><span class="pl-pds">'</span>--client<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>
    ])
);</pre></div>

<h4>
<a id="events" class="anchor" href="#events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events</h4>

<p>For complete documentation of event functions see the <a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a> documentation.</p>

<h5>
<a id="open" class="anchor" href="#open" aria-hidden="true"><span class="octicon octicon-link"></span></a>open</h5>

<p>Triggered when the session opens for the first time, or after a configuration change.</p>

<div class="highlight highlight-js"><pre>session.on(<span class="pl-s1"><span class="pl-pds">'</span>open<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Studio session ready...<span class="pl-pds">'</span></span>);
})</pre></div>

<h5>
<a id="close" class="anchor" href="#close" aria-hidden="true"><span class="octicon octicon-link"></span></a>close</h5>

<p>Triggered when the session is about to close.</p>

<div class="highlight highlight-js"><pre>session.on(<span class="pl-s1"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>Studio session closed.<span class="pl-pds">'</span></span>);
})</pre></div>

<h3>
<a id="client-class" class="anchor" href="#client-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client class</h3>

<h4>
<a id="methods-1" class="anchor" href="#methods-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h4>

<h4>
<a id="canconnectclient" class="anchor" href="#canconnectclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>canConnect(client)</h4>

<p>Check to see if a client can successfully connect its outputs to the inputs of another client.</p>

<ul>
<li>
<code>client</code> a <code>Client</code> or to connect to.</li>
<li>Returns either <code>true</code> or <code>false</code> depending on success.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .canConnect(session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-2<span class="pl-pds">'</span></span>));</pre></div>

<h4>
<a id="connectclient" class="anchor" href="#connectclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>connect(client)</h4>

<p>Connect the outputs of a client to the inputs of another client.</p>

<ul>
<li>
<code>client</code> a <code>Client</code> or to connect to.</li>
<li>Returns either <code>true</code> or <code>false</code> depending on success.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .connect(session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-2<span class="pl-pds">'</span></span>));</pre></div>

<h5>
<a id="createclientportname" class="anchor" href="#createclientportname" aria-hidden="true"><span class="octicon octicon-link"></span></a>createClient(portName)</h5>

<p>Create an interface to a set of matching jack ports, even if they do not currently exist in the session. See <code>Client.isOnline</code>.</p>

<ul>
<li>
<code>portName</code> a <code>String</code> or <code>RegExp</code> to search with.</li>
<li>Returns an instance of <code>Client</code>.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>my-client<span class="pl-pds">'</span></span>)
    .createClient(<span class="pl-s1"><span class="pl-pds">'</span>event-out<span class="pl-pds">'</span></span>);</pre></div>

<h4>
<a id="disconnectclient" class="anchor" href="#disconnectclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>disconnect(client)</h4>

<p>Disconnect the outputs of a client from the inputs of another port.</p>

<ul>
<li>
<code>client</code> a <code>Client</code> or to connect to.</li>
<li>Returns either <code>true</code> or <code>false</code> depending on success.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .disconnect(session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-2<span class="pl-pds">'</span></span>));</pre></div>

<h4>
<a id="isconnectedclient" class="anchor" href="#isconnectedclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>isConnected([client])</h4>

<p>Check to see if a client is connected to any client or connected to a specific client.</p>

<ul>
<li>Optionally <code>client</code> a <code>Client</code> to check for connections to.</li>
<li>Returns <code>true</code> when connected and <code>false</code> when disconnected.</li>
</ul>

<div class="highlight highlight-js"><pre><span class="pl-c">// Is the client connected to anything?</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .isConnected();

<span class="pl-c">// Are these clients connected?</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .isConnected(session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-2<span class="pl-pds">'</span></span>));</pre></div>

<h4>
<a id="isdisonnectedclient" class="anchor" href="#isdisonnectedclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>isDisonnected([client])</h4>

<p>Check to see if a client is not connected to any client or not connected to a specific client.</p>

<ul>
<li>Optionally <code>client</code> a <code>Client</code> to check for connections to.</li>
<li>Returns <code>true</code> when disconnected and <code>false</code> when connected.</li>
</ul>

<div class="highlight highlight-js"><pre><span class="pl-c">// Is the client connected to anything?</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .isDisonnected();

<span class="pl-c">// Are these clients connected?</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .isDisonnected(session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-2<span class="pl-pds">'</span></span>));</pre></div>

<h4>
<a id="isclientclientname" class="anchor" href="#isclientclientname" aria-hidden="true"><span class="octicon octicon-link"></span></a>isClient(clientName)</h4>

<p>Check to see if this <code>Client</code> handles clients of the specified name.</p>

<ul>
<li>
<code>clientName</code> a <code>String</code> compare with.</li>
<li>Returns <code>true</code> when the name matches and <code>false</code> when it does not.</li>
</ul>

<h5>
<a id="note-when-the-client-has-no-associated-client-name-it-will-match-any-jack-client" class="anchor" href="#note-when-the-client-has-no-associated-client-name-it-will-match-any-jack-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>NOTE: When the <code>Client</code> has no associated client name, it will match <em>any</em> Jack client.</h5>

<div class="highlight highlight-js"><pre><span class="pl-c">// Returns true:</span>
session.createClient(<span class="pl-sr"><span class="pl-pds">/</span>jack<span class="pl-pds">/</span>i</span>)
    .isClient(<span class="pl-s1"><span class="pl-pds">'</span>PulseAudio JACK Sink<span class="pl-pds">'</span></span>);

<span class="pl-c">// Returns false:</span>
session.createClient(<span class="pl-sr"><span class="pl-pds">/</span>jack<span class="pl-pds">/</span>i</span>)
    .isClient(<span class="pl-s1"><span class="pl-pds">'</span>system<span class="pl-pds">'</span></span>);</pre></div>

<h4>
<a id="isportportname" class="anchor" href="#isportportname" aria-hidden="true"><span class="octicon octicon-link"></span></a>isPort(portName)</h4>

<p>Check to see if this <code>Client</code> handles ports of the specified name.</p>

<ul>
<li>
<code>portName</code> a <code>String</code> compare with.</li>
<li>Returns <code>true</code> when the name matches and <code>false</code> when it does not.</li>
</ul>

<h5>
<a id="note-when-the-client-has-no-associated-port-name-it-will-match-any-jack-port" class="anchor" href="#note-when-the-client-has-no-associated-port-name-it-will-match-any-jack-port" aria-hidden="true"><span class="octicon octicon-link"></span></a>NOTE: When the <code>Client</code> has no associated port name, it will match <em>any</em> Jack port.</h5>

<div class="highlight highlight-js"><pre><span class="pl-c">// Returns true:</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>,<span class="pl-sr"> <span class="pl-pds">/</span>left<span class="pl-k">|</span>right<span class="pl-pds">/</span>i</span>)
    .isPort(<span class="pl-s1"><span class="pl-pds">'</span>left<span class="pl-pds">'</span></span>);

<span class="pl-c">// Returns false:</span>
session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>,<span class="pl-sr"> <span class="pl-pds">/</span>left<span class="pl-k">|</span>right<span class="pl-pds">/</span>i</span>)
    .isPort(<span class="pl-s1"><span class="pl-pds">'</span>center<span class="pl-pds">'</span></span>);</pre></div>

<h4>
<a id="isoffline" class="anchor" href="#isoffline" aria-hidden="true"><span class="octicon octicon-link"></span></a>isOffline()</h4>

<p>Check to see if a client is currently offline.</p>

<ul>
<li>Returns <code>true</code> when offline and <code>false</code> when online.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .isOffline();</pre></div>

<h4>
<a id="isonline" class="anchor" href="#isonline" aria-hidden="true"><span class="octicon octicon-link"></span></a>isOnline()</h4>

<p>Check to see if a client is currently online and available.</p>

<ul>
<li>Returns <code>true</code> when online and <code>false</code> when offline.</li>
</ul>

<div class="highlight highlight-js"><pre>session.createClient(<span class="pl-s1"><span class="pl-pds">'</span>client-1<span class="pl-pds">'</span></span>)
    .isOnline();</pre></div>

<h3>
<a id="events-1" class="anchor" href="#events-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events</h3>

<p>For complete documentation of event functions see the <a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a> documentation.</p>

<h4>
<a id="online" class="anchor" href="#online" aria-hidden="true"><span class="octicon octicon-link"></span></a>online</h4>

<p>Triggered when the client or a port belonging to the client comes online.</p>

<h4>
<a id="offline" class="anchor" href="#offline" aria-hidden="true"><span class="octicon octicon-link"></span></a>offline</h4>

<p>Triggered when the client or a port belonging to the client goes offline.</p>

<h4>
<a id="connect" class="anchor" href="#connect" aria-hidden="true"><span class="octicon octicon-link"></span></a>connect</h4>

<p>Triggered when a port belonging to the client is connected to another port.</p>

<h4>
<a id="disconnect" class="anchor" href="#disconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>disconnect</h4>

<p>Triggered when a port belonging to the client is disconnected from another port.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Jack Sanity maintained by <a href="https://github.com/psychoticmeow">psychoticmeow</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
