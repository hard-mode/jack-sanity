// When the music EQ starts...
Patchbay.on('music-eq.client-appeared', function(client) {
	var quodlibet = Patchbay.findClient('quodlibet'),
		system = Patchbay.findClient('system');

	// Disconnect Quod Libet from playback:
	if (quodlibet) {
		quodlibet.connectOutput(client);
		client.connectOutput(system);
		quodlibet.disconnectOutput(system);
	}
});

// When the music EQ stops...
Patchbay.on('music-eq.client-dissapeared', function(client) {
	var quodlibet = Patchbay.findClient('quodlibet'),
		system = Patchbay.findClient('system');

	// Connect Quod Libet to playback:
	if (quodlibet) {
		quodlibet.connectOutput(system);
	}
});

// When Quod Libet starts...
Patchbay.on('quodlibet.client-appeared', function(client) {
	var musicEq = Patchbay.findClient('music-eq'),
		system = Patchbay.findClient('system');

	// Connect through the EQ:
	if (musicEq) {
		client.connectOutput(musicEq);
		musicEq.connectOutput(system);
	}

	// Or directly to playback:
	else {
		client.connectOutput(system);
	}
});